# fin-manager Project Context

**Project Type:** Full-Stack Java + React Web Application  
**Created:** 2026  
**Purpose:** Avant's Personal Finance Management Tool

---

## Project Overview

fin-manager is a comprehensive personal finance application with:
- **Backend:** Java 21 REST API with SQLite database
- **Frontend:** React 18 with Bootstrap UI
- **Build System:** Maven (orchestrates both Java & React builds)

---

## Architecture & Tech Stack

### Backend
| Component | Technology | Version |
|-----------|-----------|---------|
| Language | Java | 21 |
| Database | SQLite | 3.45.0.0 |
| JSON Processing | Gson | 2.10.1 |
| API Docs | Swagger/OpenAPI 3.0 | 2.2.16 |
| JSON Mapping | Jackson | 2.15.3 |
| Testing | JUnit | 4.13.2 |

### Frontend
| Component | Technology | Version |
|-----------|-----------|---------|
| UI Framework | React | 18.2.0 |
| CSS Framework | Bootstrap | 5.3.0 |
| Build Tool | react-scripts | (included) |

### Build & Deployment
| Tool | Version | Purpose |
|------|---------|---------|
| Maven | 3.8+ | Java/Project build orchestration |
| Node.js | v20.10.0 | JavaScript runtime (auto-installed) |
| npm | 10.2.3 | Frontend dependency manager (auto-installed) |

---

## Project Structure

```
fin-manager/
├── src/
│   ├── main/
│   │   ├── java/com/finmanager/
│   │   │   ├── Main.java                    # Entry point
│   │   │   ├── api/                         # REST API endpoints
│   │   │   │   ├── AnalyticsAPI.java
│   │   │   │   ├── CategoryAPI.java
│   │   │   │   ├── ExpenseAPI.java
│   │   │   │   ├── InvestmentAPI.java
│   │   │   │   ├── RecurringExpenseAPI.java
│   │   │   │   └── ApiResponse.java
│   │   │   ├── service/                     # Business logic
│   │   │   │   ├── AnalyticsService.java
│   │   │   │   ├── CategoryService.java
│   │   │   │   ├── ExpenseService.java
│   │   │   │   ├── InvestmentService.java
│   │   │   │   └── RecurringExpenseService.java
│   │   │   ├── db/
│   │   │   │   └── DatabaseManager.java     # SQLite database layer
│   │   │   ├── model/                       # Domain models
│   │   │   │   ├── Category.java
│   │   │   │   ├── Expense.java
│   │   │   │   ├── InvestmentEntry.java
│   │   │   │   ├── RecurringExpense.java
│   │   │   │   └── Builder.java
│   │   │   ├── util/                        # Utility classes
│   │   │   │   ├── AppConfig.java
│   │   │   │   ├── CurrencyConverter.java
│   │   │   │   ├── DataInitializer.java
│   │   │   │   ├── DateUtils.java
│   │   │   │   ├── ExportUtil.java
│   │   │   │   ├── Logger.java
│   │   │   │   └── ValidationUtil.java
│   │   │   ├── config/
│   │   │   │   └── SwaggerConfig.java       # API documentation
│   │   │   └── server/
│   │   │       └── EmbeddedServer.java      # HTTP server (Jetty/Undertow)
│   │   └── frontend/
│   │       ├── src/
│   │       │   ├── App.js                   # Main React component
│   │       │   ├── index.js                 # React entry point
│   │       │   ├── components/
│   │       │   │   ├── Dashboard.js         # Dashboard UI
│   │       │   │   └── LoginPage.js         # Login UI
│   │       │   ├── context/
│   │       │   │   └── AuthContext.js       # Authentication state
│   │       │   ├── api/
│   │       │   │   └── ApiClient.js         # API communication
│   │       │   └── [CSS files]
│   │       ├── public/
│   │       │   └── index.html               # HTML template
│   │       ├── build/                       # Compiled React (auto-generated)
│   │       └── package.json
│   └── test/
│       └── java/com/finmanager/
│           ├── service/                     # Service unit tests
│           ├── util/                        # Utility tests
│           └── integration/                 # Integration tests
├── pom.xml                                   # Maven configuration
├── build.bat                                 # Windows build script
├── build.sh                                  # Linux/Mac build script
└── README.md                                 # User documentation

```

---

## Key Features

### Finance Management
- **Expense Tracking:** Record and categorize expenses
- **Income Management:** Track income sources
- **Recurring Expenses:** Set up and manage recurring payments
- **Investment Tracking:** Monitor investment portfolio
- **Analytics:** Generate financial reports and insights

### Technical Features
- RESTful API with Swagger/OpenAPI documentation
- JWT/Token-based authentication (via AuthContext)
- Currency conversion support
- Data export functionality
- SQLite database persistence

---

## Build & Run

### Prerequisites
- **Java 21** (JDK)
- **Maven 3.8+**
- **Git**
- ⚠️ **Important:** Do NOT manually install Node.js/npm - Maven will auto-install them

### Maven Lifecycle

When you run `mvn clean install package`:

1. **generate-resources phase:**
   - Installs Node.js v20.10.0 (if missing)
   - Installs npm 10.2.3 (if missing)
   - Runs `npm install` in frontend directory
   - Builds React frontend → `src/main/frontend/build/`

2. **compile phase:**
   - Compiles Java backend

3. **test phase:**
   - Runs all unit & integration tests

4. **package phase:**
   - Creates uber-JAR with frontend included: `target/fin-manager.jar`

### Running the Application

**Option 1: Direct Java Execution** (Development)
```bash
mvn clean compile exec:java -Dexec.mainClass="com.finmanager.Main"
```
- Starts API server on `http://localhost:8080`
- Frontend available at `http://localhost:8080/` (serves build/ directory)

**Option 2: JAR Execution** (Production)
```bash
mvn clean package
java -jar target/fin-manager.jar
```

**Option 3: Frontend Development Mode** (React hot-reload)
```bash
cd src/main/frontend
npm start
```
- Starts React dev server on `http://localhost:3000`
- Requires backend running separately on port 8080

---

## API Documentation

Once running, Swagger UI is available at:
```
http://localhost:8080/swagger-ui.html
```

All API endpoints require authentication token (except health check):
```bash
curl http://localhost:8080/api/health
```

---

## Database

- **Type:** SQLite 3
- **Location:** Auto-created at runtime (check project root or temp directory)
- **Schema:** Auto-initialized via DataInitializer.java
- **No manual setup required**

---

## Testing

Run all tests:
```bash
mvn test
```

Test categories:
- **Unit Tests:** Service logic, utilities
- **Integration Tests:** API endpoints, database operations
- All tests include proper setup/teardown and database isolation

---

## Common Issues & Solutions

| Issue | Solution |
|-------|----------|
| `Maven not found` | Install Maven to PATH or set `MAVEN_HOME` environment variable |
| Port 8080 already in use | Kill existing process or change port in `EmbeddedServer.java` |
| npm install fails | Delete `src/main/frontend/node_modules` and `src/main/frontend/package-lock.json`, retry |
| React build fails | Check `src/main/frontend/build` directory exists, check console for errors |
| Java version mismatch | Ensure JDK 21+ is installed: `java -version` |

---

## Development Workflow

### Making Code Changes

**Backend changes:**
1. Edit Java files in `src/main/java`
2. Run `mvn compile` to verify
3. Run `mvn test` to test changes
4. Restart server to see changes

**Frontend changes:**
1. Edit React files in `src/main/frontend/src`
2. If using development mode: changes auto-reload
3. If deploying: run `mvn clean package` to rebuild

### Adding Dependencies

**Java:**
1. Add to `pom.xml` `<dependencies>` section
2. Run `mvn clean install`

**React:**
1. Run `cd src/main/frontend && npm install <package>`
2. Commit updated `package.json` & `package-lock.json`
3. Next Maven build will include it

---

## GitHub Integration

- Repository: `https://github.com/beemer/fin-manager`
- GitHub CLI configured for PR automation
- All commits include tests passing

---

## Performance Considerations

- **Frontend:** React optimized with production build
- **Backend:** Single-threaded API with connection pooling for SQLite
- **Database:** Indexes on frequently queried columns
- **Memory:** Typical startup ~256MB, runtime varies with data size

---

## Maintenance & Future Work

- Keep Java 21 JDK updated
- Update dependencies quarterly via `mvn dependency:update-properties`
- Monitor SQLite performance with large datasets (consider migration to PostgreSQL if needed)
- React dependencies should be updated via npm audit/update workflow

---

## Quick Reference

| Command | Purpose |
|---------|---------|
| `mvn clean` | Remove all build artifacts |
| `mvn compile` | Compile Java code |
| `mvn test` | Run all tests |
| `mvn package` | Create deployable JAR |
| `mvn clean compile exec:java -Dexec.mainClass="com.finmanager.Main"` | Run dev server |
| `java -jar target/fin-manager.jar` | Run production server |
| `cd src/main/frontend && npm start` | Run React dev server |

---

**Last Updated:** February 18, 2026  
**Maintained By:** GitHub Copilot
